# 嵌套系列

## 目前代码  

- `nested_1.pde`：嵌套
- `nested_2.pde`：固定进制
- `nested_3.pde`：第三进制
- `nested_4.pde`：多次转换
- `nested_5.pde`：是否周期
- `nested_6.pde`：周期中的图形模式
- `nested_7.pde`：周期值

## 简介

`nested_1.pde`：颜色字符串是递增的二进制数  
即先转成二进制  
然后按位数和每一位的数值再转换进制  
最后按照第三进制的方式画图  
一共转换两次  

`nested_2.pde`：与 `nested_1.pde` 的不同之处是  
再转换进制时  
进制与第一次转换得到的位数无关  
便于画特定进制对应图形  

`nested_3.pde`：与 `nested_1.pde` 相比  
先转指定进制再用第三进制的方式得到转换字符串  
与第三进制相比  
转换字符串也是类似转换的结果  

`nested_4.pde`：与 `nested_3.pde` 相比  
增加参数 `count` 转换次数  
多次转换  
每次的结果都作为下一次的转换字符串  
而每次转换用的数值不变   

`nested_5.pde`：与 `nested_4.pde` 相比  
如果发现周期就停止转换  
同时能用颜色区分是否发现周期  

`nested_6.pde`：画一个数字指定初始转换字符串各次转换结果  

`nested_7.pde`：画各数字  
在指定初始转换字符串的情况下的周期值      

## 不同层次的图形

由于多次转换的逻辑，这里的代码能画出更多层次的图形，调参数也更复杂。

如果说 `math_black_white/` 里面代码的难点主要是数学公式，那么这里的难点主要是逻辑复杂，层次很多，图形抽象。

不改参数，直接画，能画出的图形种类是有限的，尽管耐心等待到后面能看到不同的图形。

当时我就徒手改代码中的各种参数，把不同数位对应的图形抽出来看，也看相邻几个数位组合在一起对应的图形，各不一样。

有些是很规整的大块图形，有些像抽象画，有些则看起来像分成了很多小块，每个小块里面的细节都有自己的风格。

相邻几个数位组合在一起对应的图形，有些就像里面隐藏了更简单的代码画出的图形，回响着黑和白的舞蹈。

不同参数组合能画出风格迥异的图形。

甚至得到过这种图形（`nested_4\黑和白的舞蹈_嵌套_多次转换_300x256格_格子尺寸1x1_转换次数3_初始转换字符串1100000000000000_数位范围3到3_数字范围16到76815_0的颜色255_1的颜色0_背景颜色255.png`）：

![nested_4\黑和白的舞蹈_嵌套_多次转换_300x256格_格子尺寸1x1_转换次数3_初始转换字符串1100000000000000_数位范围3到3_数字范围16到76815_0的颜色255_1的颜色0_背景颜色255.png](nested_4\黑和白的舞蹈_嵌套_多次转换_300x256格_格子尺寸1x1_转换次数3_初始转换字符串1100000000000000_数位范围3到3_数字范围16到76815_0的颜色255_1的颜色0_背景颜色255.png)  

如果没有其他任何信息，你能猜出来这幅图形是怎么画出来的吗？

同时也说明了为什么图片都有这么长的名称——提取出来，换掉代码里相应参数值，即可复现。

后面还发现了周期，固定数值，在一个周期内，字符串的不断转换，也能得到风格完全不同的图形（详见 `nested6/`），与之前代码的风格都不一样，就是黑白方格组成的不同模式，直接看图形完全看不出与其他代码画出的图形的联系。

而 `nested_7.pde`，主要目的是展示周期值，所以画出来的每一行读数就好了。但是就这也能画出不同的风格？

这里的探索方式因代码而异。由于水平有限，还有很多细节没有摸清楚，可能的猜测也不一定正确。

## 主要可调参数

- `cellWidth`：格子宽度
- `cellHeight`：格子高度
- `maxDigits`：最大数位数。`nested_6.pde` 没有这个参数。
- `distance`：相邻两列左侧之间距离
- `offset`：初始数值，最好小于 2147483647 并拉开距离，以免出现负数
- `nth`：查看特定数位用。画出第 `nth` 位到第 `nth + min(maxDigits, distance) - 1` 位。1 指最低位。不足的不画。
- `conversionString1`：指定初始转换用的字符串。`nested_1-2.pde` 里面对应 `colorString` 而且不用指定初始值。
- 画布尺寸。默认值与其余代码有很大不同：
  - `nested_1.pde`：400x240
  - `nested_2.pde`：300x256
  - `nested_3.pde`：300x250
  - `nested_4.pde`：300x256
  - `nested_5.pde`：300x250
  - `nested_6.pde`：300x250
  - `nested_7.pde`：300x250

对 `nested_2.pde`，有 `base` 可调，用于固定第二次转换的进制。  
对 `nested_4.pde`，有 `count` 可调，一共转换 `count` 次。  
注意：`nested_6.pde` 中的 `count` 用来统计累计转换次数，以便查看信息，调节其值不能改变画出的图形。  
对 `nested_5.pde`、`nested_7.pde`，有 `maxCount` 可调，防止转换次数太多而太慢。  

颜色也可以尝试调。  

## 可能的使用方式

点击鼠标左键可以暂停，再点击鼠标左键继续画。  
点击鼠标右键保存图形。  
每画满一张图都自动保存一次。  
在控制台查看保存的图片名称等信息。  

要看不同视觉效果可以尝试调整各个主要参数的值，每次调整完，重新运行，才能起作用。  

### nested_1-5.pde

可以画有多个层次的图形

除了单独调每一个参数以外，可以大致按这个顺序：

- `count`（`nested_4.pde`）或 `maxCount`（`nested_5.pde`）：越大，图形越复杂。`nested_1.pde`、`nested_2.pde`、`nested_3.pde` 跳过这一步。
- `nth`，`maxDigits`，`distance`：共同决定画哪些部分，不同部分之间差异很明显。
- `conversionString1`：位数会影响下一步。`nested_1.pde` 和 `nested_2.pde` 跳过这一步。
- 画布尺寸、`cellWidth`、`cellHeight`、`offset`：画什么范围，画多少格，一列画多少格直接影响视觉效果，而画多少列影响范围。
- 如果还有剩下的，最后调整。

只转换一次，画出的图形与 `black_white/` 或 `base3/` 里面的代码画出的图形无异。重点可以放在至少转换两次能画出什么图形上。

### nested_6.pde

指定初始转换字符串 `conversionString1`  
每次运行随机 `n`  
每次转换画一行  
最后形成何图形  
数一数周期几何  

发现一个数字  
周期比较特别  
就作为 `n` 的值  
画转换的细节  

每个数字对应的图形里面似乎包含了特定的结构信息有待进一步探索？  

### nested_7.pde

指定初始转换字符串 `conversionString1`  
确定从哪里开始画  
找到相应位置，最左侧最低位，按二进制读数，  
就是转换的周期值  
合适的初始转换字符串，合适的范围，也能画出不同的风格。  

结合 `println()` 控制台输出  
筛选特定周期的数字，默认筛选周期大于等于 12 的数字。  
似乎给定范围，可能出现的周期值只有少数几种？  

筛选时注释掉 `saveFrame()` 以免保存太多图形。  

貌似这里又到了数学。  
